---
title: 'ロジック・アップデート'
description: 'ロジックをアップデートする方法を学びます。'
icon: 'diagram-project'
---


## ロジック・アップデートの概要

アプリケーションの成長に伴い、既存のビジネスルールの変更やパフォーマンスの改善が必要になる状況が発生します。**Logic Update**は、既存コードの文脈を維持しながら、新しい要件に合わせてロジックを精緻に調整するプロセスです。Prometheus AIは、既存コードの依存関係を把握し、サイドエフェクト（Side Effect）を最小限に抑えたアップデートを支援します。

---

## 主なアップデートシナリオ

以前作成した「閲覧数のみを基準とする人気記事ロジック」を、日付条件も含めるようアップデートするプロセスです。

1. **変更要件の提示**: 既存ロジックの修正方向を明確に示します。
   > **Prompt:** "既存の人気記事ロジックをアップデートして。これからは累計閲覧数だけでなく、『直近7日以内に作成された記事』の中で閲覧数が50件以上の場合のみを人気記事として表示させたい。"

2. **コード分析と修正**: AIは`read_file`を通じて既存の`BoardService`コードを読み取り、日付比較ロジックを追加して安全にアップデートを進行します。

3. **パフォーマンス最適化の依頼**: ロジックが複雑になる場合、パフォーマンスの改善を同時に依頼できます。
   > **Prompt:** "このロジックがデータベースに負荷を与えないよう、インデックスを考慮したりクエリを最適化したりして修正して。"

---

## 安全なアップデートのためのプロセス

1. **現在のロジック分析**: AIは`read_file`を通じて、現在実装されているロジックと接続された依存関係（メソッド呼び出し、DBテーブルなど）をまず分析します。
2. **変更箇所の計画**: `view_diff`ツールを提案し、修正予定のコード行をユーザーに事前に提示して承認を受けます。
3. **段階的な適用**: 一度に多くのファイルを修正するよりも、核心となるロジックが含まれるファイルから一つずつアップデートするのが安全です。
4. **回帰テスト**: アップデート後、`run_terminal_command`で既存のテストコードが引き続きパスするか確認し、デグレードが発生していないか検証します。

---

## 💡 ロジック・アップデートのヒント

* **「Before & After」を明示する**: 「以前はAという方式で動作していたが、今後はBという方式に変えて」と明確に対比して指示すると、AIが修正範囲をより正確に把握します。
* **影響範囲の質問**: ロジックを修正する前に、AIに「このロジックを修正すると、他にどんなファイルに影響が及ぶ？」と尋ねてみてください。予期せぬエラーを未然に防ぐことができます。
* **バックアップ指針の活用**: 重要なロジックを修正する際は、「既存のロジックはコメントアウトして残したまま、新しいロジックを書いて」と依頼し、復旧ポイントを確保してください。

---
