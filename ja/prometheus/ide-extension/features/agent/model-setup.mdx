---
title: 'モデル設定'
description: 'Prometheusでのモデルの構成とセットアップ方法について学びます。'
---

# エージェントモードのモデル設定

> 推奨モデルや最適なパフォーマンスのための構成オプションなど、Prometheusのエージェントモードに向けたモデル設定方法について学びます。

export const ModelRecommendations = ({role = "all"}) => {
  const parseMarkdownLinks = text => {
    const regex = /\[([^\]]+)\]\(([^)]+)\)/g;
    const parts = [];
    let lastIndex = 0;
    let match;
    let key = 0;
    while ((match = regex.exec(text)) !== null) {
      if (match.index > lastIndex) {
        const beforeText = text.slice(lastIndex, match.index);
        if (beforeText) {
          parts.push(<span key={key++}>{beforeText}</span>);
        }
      }
      const [, linkText, url] = match;
      parts.push(<a key={key++} href={url} target="_blank" rel="noopener noreferrer" style={{
        color: "#0066cc",
        textDecoration: "underline"
      }}>
          {linkText}
        </a>);
      lastIndex = regex.lastIndex;
    }
    if (lastIndex < text.length) {
      const remainingText = text.slice(lastIndex);
      if (remainingText) {
        parts.push(<span key={key++}>{remainingText}</span>);
      }
    }
    return parts.length > 0 ? parts : text;
  };
  const modelRecs = {
    agent_plan: {
      open: ["[Qwen3 Coder (480B)](https://hub.continue.dev/openrouter/qwen3-coder)", "[Qwen3 Coder (30B)](https://hub.continue.dev/ollama/qwen3-coder-30b)", "[Devstral (27B)](https://hub.continue.dev/ollama/devstral)", "[Kimi K2 (1T)](https://hub.continue.dev/openrouter/kimi-k2)", "[gpt-oss (120B)](https://hub.continue.dev/openrouter/gpt-oss-120b)", "[gpt-oss (20B)](https://hub.continue.dev/ollama/gpt-oss-20b)", "[GLM 4.5 (355B)](https://hub.continue.dev/openrouter/glm-4-5)", "[GLM 4.5 Air (106B)](https://hub.continue.dev/openrouter/glm-4-5-air)"],
      closed: ["[Claude Opus 4.1](https://hub.continue.dev/anthropic/claude-4-1-opus)", "[Claude Sonnet 4](https://hub.continue.dev/anthropic/claude-4-sonnet)", "[GPT-5](https://hub.continue.dev/openai/gpt-5)", "[Gemini 2.5 Pro](https://hub.continue.dev/google/gemini-2.5-pro)"],
      notes: "クローズドモデルの方がオープンモデルよりわずかに優れています"
    },
    chat_edit: {
      open: ["[Qwen3 Coder (480B)](https://hub.continue.dev/openrouter/qwen3-coder)", "[Qwen3 Coder (30B)](https://hub.continue.dev/ollama/qwen3-coder-30b)", "[gpt-oss (120B)](https://hub.continue.dev/openrouter/gpt-oss-120b)", "[gpt-oss (20B)](https://hub.continue.dev/ollama/gpt-oss-20b)"],
      closed: ["[Claude Opus 4.1](https://hub.continue.dev/anthropic/claude-4-1-opus)", "[Claude Sonnet 4](https://hub.continue.dev/anthropic/claude-4-sonnet)", "[GPT-5](https://hub.continue.dev/openai/gpt-5)", "[Gemini 2.5 Pro](https://hub.continue.dev/google/gemini-2.5-pro)"],
      notes: "クローズドモデルとオープンモデルで性能はほぼ同等です"
    },
    autocomplete: {
      open: ["[QwenCoder2.5 (1.5B)](https://hub.continue.dev/ollama/qwen2.5-coder-1.5b)", "[QwenCoder2.5 (7B)](https://hub.continue.dev/ollama/qwen2.5-coder-7b)"],
      closed: ["[Codestral](https://hub.continue.dev/mistral/codestral)", "[Mercury Coder](https://hub.continue.dev/inception/mercury-coder)"],
      notes: "クローズドモデルの方がオープンモデルよりわずかに優れています"
    },
    apply: {
      open: ["[FastApply](https://hub.continue.dev/mdpauley/fast-apply-15b-v10)"],
      closed: ["[Relace Instant Apply](https://hub.continue.dev/relace/instant-apply)", "[Morph Fast Apply](https://hub.continue.dev/morphllm/morph-v2)"],
      notes: "クローズドモデルの方がオープンモデルより優れています"
    },
    embed: {
      open: ["[Nomic Embed Text](https://hub.continue.dev/ollama/nomic-embed-text-latest)", "Qwen3 Embedding"],
      closed: ["[Voyage Code 3](https://hub.continue.dev/voyageai/voyage-code-3)", "[Morph Embeddings](https://hub.continue.dev/morphllm/morph-embedding-v2)", "Codestral Embed"],
      notes: "クローズドモデルの方がオープンモデルよりわずかに優れています"
    },
    rerank: {
      open: ["zerank-1", "zerank-1-small", "Qwen3 Reranker"],
      closed: ["[Voyage Rerank 2.5](https://hub.continue.dev/voyageai/rerank-2-5)", "Relace Code Rerank", "[Morph Rerank](https://hub.continue.dev/morphllm/morph-rerank-v2)"],
      notes: "このモデルロールでもオープンモデルが登場し始めています"
    },
    next_edit: {
      open: ["[Instinct](https://hub.continue.dev/continuedev/instinct)"],
      closed: ["[Mercury Coder](https://hub.continue.dev/inception/mercury-coder)"],
      notes: "クローズドモデルの方がオープンモデルより優れています"
    }
  };
  let rolesToShow = [];
  if (!role || role === "all") {
    rolesToShow = Object.keys(modelRecs);
  } else {
    const key = role.toLowerCase().replace(/\s|\//g, "_").replace(/-/g, "_");
    if (modelRecs[key]) {
      rolesToShow = [key];
    }
  }
  if (rolesToShow.length === 0) {
    return <div>推奨モデルが見つかりませんでした： {role}</div>;
  }
  return <table style={{
    width: "100%",
    borderCollapse: "collapse",
    marginTop: "1rem"
  }}>
      <thead>
        <tr>
          <th style={{
    textAlign: "left",
    borderBottom: "1px solid #ddd",
    padding: "8px"
  }}>
            モデルロール
          </th>
          <th style={{
    textAlign: "left",
    borderBottom: "1px solid #ddd",
    padding: "8px"
  }}>
            推奨オープンモデル
          </th>
          <th style={{
    textAlign: "left",
    borderBottom: "1px solid #ddd",
    padding: "8px"
  }}>
            推奨クローズドモデル
          </th>
          <th style={{
    textAlign: "left",
    borderBottom: "1px solid #ddd",
    padding: "8px"
  }}>
            備考
          </th>
        </tr>
      </thead>
      <tbody>
        {rolesToShow.map(roleKey => {
    const rec = modelRecs[roleKey];
    if (!rec) return null;
    return <tr key={roleKey}>
              <td style={{
      fontWeight: 600,
      verticalAlign: "top",
      padding: "8px"
    }}>
                {roleKey.replace(/_/g, " ").replace(/\b\w/g, l => l.toUpperCase())}
              </td>
              <td style={{
      padding: "8px",
      verticalAlign: "top"
    }}>
                {rec.open.map((m, i) => <div key={i} style={{
      marginBottom: "4px"
    }}>
                    {parseMarkdownLinks(m)}
                  </div>)}
              </td>
              <td style={{
      padding: "8px",
      verticalAlign: "top"
    }}>
                {rec.closed.map((m, i) => <div key={i} style={{
      marginBottom: "4px"
    }}>
                    {parseMarkdownLinks(m)}
                  </div>)}
              </td>
              <td style={{
      padding: "8px",
      verticalAlign: "top"
    }}>
                {rec.notes}
              </td>
            </tr>;
  })}
      </tbody>
    </table>;
};

チャットモード用に設定したモデルが、ツール呼び出しをサポートしている場合、エージェントモードでも使用されます。推奨モデルとその設定方法については、[こちら](/ide-extensions/chat/model-setup)をご覧ください。

## システムメッセージツール（System Message Tools）の仕組み

Prometheusは、ネイティブ機能に関係なく、すべてのモデルで一貫したツール機能を実現する **システムメッセージツール** と呼ばれる革新的なアプローチを導入しています。これにより、エージェントモードはより幅広いモデルやプロキシでシームレスに動作します。

### システムメッセージツールの機能

（プロバイダーごとに異なる）ネイティブのツール呼び出しAPIのみに依存するのではなく、PrometheusはツールをXML形式に変換してシステムメッセージに含めます。モデルはレスポンス内で構造化されたXMLとしてツール呼び出しを生成し、Prometheusがそれを解析して実行します。このアプローチにより、以下が可能になります：

* **ユニバーサルな互換性**: ネイティブのツールサポートがあるモデルだけでなく、指示に従うことができるあらゆるモデルでツールを使用可能
* **一貫した動作**: OpenAI、Anthropic、ローカルモデルなどでツール呼び出しが全く同じように機能
* **信頼性の向上**: ネイティブツールで苦労するモデルでも、システムメッセージツールを使用するとパフォーマンスが向上することが多い
* **シームレスな切り替え**: ワークフローを変更することなく、プロバイダー間を行き来可能

## 推奨エージェントモデル

<ModelRecommendations role="all" />

### エージェントモードの構成方法

エージェントモードは、モデルの能力に基づいて、ネイティブツールとシステムメッセージツールのどちらを使用するかを自動的に判断します。追加の設定は不要です。モデルを選択するだけで、あとはPrometheusにお任せください。

### モデルの互換性を判断する方法

（エージェントモード用の）ツール使用や画像入力などの特定の機能をどのモデルがサポートしているかを確認するには、[モデル機能ガイド](/customize/deep-dives/model-capabilities)をご覧ください。
